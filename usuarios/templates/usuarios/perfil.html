{% extends 'usuarios/baseConNavbar.html' %}
{% load static %}

{% block title %}Mi Perfil - CarritoScout{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/perfil.css' %}">
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="profile-header d-flex align-items-center">
            <div class="profile-img">
                <i class="bi bi-person"></i>
            </div>
            <div>
                <h2 class="mb-1">¡Hola, {{ request.user.username }}!</h2>
                <p class="mb-0">Gestiona tu perfil y revisa tus carritos de compra</p>
            </div>
        </div>
    </div>
</div>

<!-- Barra de pestañas -->
<ul class="nav nav-tabs" id="profileTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="mi-perfil-tab" data-bs-toggle="tab" data-bs-target="#mi-perfil" type="button" role="tab" aria-controls="mi-perfil" aria-selected="true">Mi Perfil</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="estadisticas-tab" data-bs-toggle="tab" data-bs-target="#estadisticas" type="button" role="tab" aria-controls="estadisticas" aria-selected="false">Estadísticas y Resumen</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="seguridad-tab" data-bs-toggle="tab" data-bs-target="#seguridad" type="button" role="tab" aria-controls="seguridad" aria-selected="false">Seguridad y Privacidad</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="soporte-tab" data-bs-toggle="tab" data-bs-target="#soporte" type="button" role="tab" aria-controls="soporte" aria-selected="false">Soporte y Ayuda</button>
    </li>
</ul>

<div class="tab-content" id="profileTabsContent">
    <!-- Mi Perfil -->
    <div class="tab-pane fade show active" id="mi-perfil" role="tabpanel" aria-labelledby="mi-perfil-tab">
        <div class="row mt-3">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Datos Personales</h5>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3">
                                <label for="username" class="form-label">Nombre de usuario</label>
                                <input type="text" class="form-control" id="username" value="{{ request.user.username }}" readonly>
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Correo electrónico</label>
                                <input type="email" class="form-control" id="email" value="{{ request.user.email }}">
                                <div class="invalid-feedback"></div> 
                            </div>
                            <div class="mb-3">
                                <label for="first_name" class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="first_name" value="{{ request.user.first_name }}">
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="mb-3">
                                <label for="last_name" class="form-label">Apellidos</label>
                                <input type="text" class="form-control" id="last_name" value="{{ request.user.last_name }}">
                                <div class="invalid-feedback"></div>
                            </div>
                            <button type="submit" class="btn btn-primary">Guardar cambios</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Dirección</h5>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3">
                                <label for="direccion" class="form-label">Dirección</label>
                                <input type="text" class="form-control" id="direccion" value="{{ request.user.perfil.direccion }}">
                            </div>
                            <div class="mb-3">
                                <label for="telefono" class="form-label">Teléfono</label>
                                <input type="text" class="form-control" id="telefono" value="{{ request.user.perfil.telefono }}">
                            </div>
                            <div class="mb-3">
                                <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento</label>
                                <input type="date" class="form-control" id="fecha_nacimiento" value="{{ request.user.perfil.fecha_nacimiento|date:'Y-m-d' }}">
                            </div>
                            <button type="submit" class="btn btn-primary">Guardar cambios</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Estadísticas y Resumen -->
    <div class="tab-pane fade" id="estadisticas" role="tabpanel" aria-labelledby="estadisticas-tab">
        <div class="row mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Estadísticas y Resumen</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">Aquí puedes ver un resumen de tus actividades y estadísticas.</p>
                        <!-- Contenido adicional de estadísticas -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Seguridad y Privacidad -->
    <div class="tab-pane fade" id="seguridad" role="tabpanel" aria-labelledby="seguridad-tab">
        <div class="row mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Seguridad y Privacidad</h5>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3">
                                <label for="current_password" class="form-label">Contraseña actual</label>
                                <input type="password" class="form-control" id="current_password">
                            </div>
                            <div class="mb-3">
                                <label for="new_password" class="form-label">Nueva contraseña</label>
                                <input type="password" class="form-control" id="new_password">
                            </div>
                            <div class="mb-3">
                                <label for="confirm_password" class="form-label">Confirmar nueva contraseña</label>
                                <input type="password" class="form-control" id="confirm_password">
                            </div>
                            <button type="submit" class="btn btn-primary">Cambiar contraseña</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Soporte y Ayuda -->
    <div class="tab-pane fade" id="soporte" role="tabpanel" aria-labelledby="soporte-tab">
        <div class="row mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-light">
                        <h5 class="mb-0">Soporte y Ayuda</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">¿Tienes dudas o necesitas ayuda? Contáctanos o revisa nuestras preguntas frecuentes.</p>
                        <!-- Contenido adicional de soporte -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/perfil.js' %}"></script>
{% endblock %}